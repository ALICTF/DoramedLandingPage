---
// src/pages/about.astro
import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";
import Navbar from "../components/Navbar.astro";

// ایمپورت کامپوننت‌های ساخته شده
import HeroSection from "../components/about/HeroSection.astro";
import StatsSection from "../components/about/StatsSection.astro";
import CeoSection from "../components/about/CeoSection.astro";
import TechTeam from "../components/about/TechTeam.astro";
import AdminTeam from "../components/about/AdminTeam.astro";
import CtaSection from "../components/about/CtaSection.astro";

// --- Assets ---
import imgCeo from "../assets/dr-g.jpg";
import imgHeidari from "../assets/fateme.jpeg";
import imgAtaei from "../assets/zeynab.jpg";
import imgShafaati from "../assets/sajjad.jpg";
import imgAhrari from "../assets/shayan.jpg";
import imgMirzaei from "../assets/mohandes.jpg";
import imgRezghi from "../assets/drrez.jpeg";
import imgMoheb from "../assets/meysam.jpg";
import imgKhajenezhad from "../assets/mostafa.jpg";
import imgNasrollahi from "../assets/nafise.jpg";

import certPatent from "../assets/1-2.jpg";
import certHealth from "../assets/2-3.jpg";
import certKnowledge from "../assets/3-3.jpg";
import certIso from "../assets/4-1.jpg";
import certProd from "../assets/5-1.jpg";

// --- Data ---
const ceoData = {
  name: "دکتر امین‌الله گلرو",
  role: "موسس و مدیرعامل",
  image: imgCeo,
  quote:
    "هدف نهایی ما این است که با ارتقای سهولت دسترسی مردم به خدمات مراقبتی، سطح سلامت را در سراسر جهان ارتقا دهیم.",
  bio: "بنیان‌گذار شرکت گسترش لوازم درمانی نوین مدیا (دورامد). با تکیه بر دانش و فناوری روز، متعهد به ارائه ویزیت‌های اولیه مجازی با کیفیت بالا برای طیف وسیعی از نیازهای بهداشتی جامعه هستیم.",
};

const techTeamData = [
  {
    name: "مصطفی خواجه نژاد",
    role: "متخصص هوش مصنوعی | توسعه دهنده وبسایت",
    image: imgKhajenezhad,
    bio: "توسعه‌دهنده رابط‌ کاربری مدرن و متخصص هوش مصنوعی. پیاده‌سازی الگوریتم‌های هوشمند و خلق تجربه‌های تعاملی و امن در بستر وب."  },
  {
    name: "سید محمدرضا حاجی‌میرزایی",
    role: "مدیر تولید",
    image: imgMirzaei,
    bio: "حوزه تخصصی: طراحی و تولید سیستم‌های نهفته (Embedded Systems) و سنسورهای زیستی (Bio Sensors).",
  },
  {
    name: "شایان احراری",
    role: "برنامه نویس فول استک | امنیت اطلاعات",
    image: imgAhrari,
    bio: "برنامه‌نویس بک‌اند و شکارچی باگ‌های امنیتی. تخصص در معماری سرور و تضمین امنیت داده‌ها در بالاترین سطح.",
  },
];

const adminTeamData = [
  {
    name: "دکتر محمدرضا رزقی",
    role: "مدیر اجرایی",
    image: imgRezghi,
    bio: "مشاور استراتژیک در حوزه مدیریت خدمات درمانی و توسعه شبکه همکاری با بیمارستان‌ها.",
  },
  {
    name: "مهندس فاطمه حیدری",
    role: "کارشناس دیجیتال مارکتینگ",
    image: imgHeidari,
    bio: "۴ سال سابقه تخصصی در حوزه تجهیزات پزشکی.",
  },
  {
    name: "مهندس زینب عطائی",
    role: "متخصص سئو",
    image: imgAtaei,
    bio: "بهینه‌سازی موتورهای جستجو و تحلیل داده‌های رشد.",
  },
  {
    name: "مهندس سجاد شفاعتی",
    role: "مدیر فروش",
    image: imgShafaati,
    bio: "تدوین استراتژی‌های فروش B2B و ارتباط موثر با مراکز درمانی سراسر کشور.",
  },
  {
    name: "میثم محب راد",
    role: "حسابدار",
    image: imgMoheb,
    bio: "مدیریت عملیات مالی روزانه شرکت و هماهنگی بین دپارتمان‌های مختلف.",
  },
  {
    name: "نفیسه نصراللهی",
    role: "مدیر داخلی",
    image: imgNasrollahi,
    bio: "تحلیل داده‌های بازار و ارائه راهکارهای نوین برای بهبود تجربه مشتریان.",
  },
];

const certificatesData = [
  { title: "گواهی ثبت اختراع", image: certPatent },
  { title: "تاییدیه وزارت بهداشت", image: certHealth },
  { title: "گواهی دانش‌بنیان", image: certKnowledge },
  { title: "استاندارد ایزو ۱۳۴۸۵", image: certIso },
  { title: "مجوز تولید", image: certProd },
];
---

<Layout
  title="درباره ما | شرکت دورامد"
  description="آشنایی با تیم متخصص دورامد، پیشگامان سلامت هوشمند در ایران."
>
  <Navbar />

  <main
    class="relative pt-28 md:pt-36 pb-16 md:pb-24 overflow-hidden bg-gray-50"
  >
    <div
      class="fixed inset-0 opacity-[0.03] pointer-events-none"
      style="background-image: url('/images/noise.svg');"
    >
    </div>
    <div
      class="fixed top-0 left-0 w-[600px] h-[600px] bg-doramed-primary/10 rounded-full blur-[100px] pointer-events-none -z-10"
    >
    </div>

    <HeroSection />

    <StatsSection />

    <CeoSection ceo={ceoData} />

    <AdminTeam team={adminTeamData} />

    <TechTeam team={techTeamData} />

    <CtaSection />
  </main>

  <Footer />

  <div
    id="cert-modal"
    class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4"
    role="dialog"
    aria-modal="true"
  >
    <div
      id="modal-backdrop"
      class="absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity opacity-0"
    >
    </div>

    <div
      id="modal-content"
      class="relative z-10 flex flex-col items-center justify-center opacity-0 scale-95 transition-all duration-300"
    >
      <button
        id="close-modal-btn"
        class="absolute -top-12 right-0 md:-right-12 text-white/80 hover:text-white hover:bg-white/10 rounded-full p-2 transition-all"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke="currentColor"
          class="w-8 h-8"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>

      <img
        id="modal-img"
        src=""
        alt="Certificate"
        class="w-auto h-auto max-w-full md:max-w-[600px] max-h-[70vh] md:max-h-[80vh] object-contain rounded-xl shadow-2xl border-4 border-white/10 bg-white"
      />
    </div>
  </div>
</Layout>

<script>
  document.addEventListener("astro:page-load", () => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("active");
          }
        });
      },
      { threshold: 0.1 }
    );
    document
      .querySelectorAll(".scroll-reveal")
      .forEach((el) => observer.observe(el));

    const modal = document.getElementById("cert-modal");
    const modalImg = document.getElementById("modal-img") as HTMLImageElement;
    const backdrop = document.getElementById("modal-backdrop");
    const content = document.getElementById("modal-content");
    const closeBtn = document.getElementById("close-modal-btn");

    if (modal && modalImg && backdrop && content) {
      const openModal = (src: string) => {
        modalImg.src = src;
        modal.classList.remove("hidden");
        requestAnimationFrame(() => {
          backdrop.classList.remove("opacity-0");
          content.classList.remove("opacity-0", "scale-95");
        });
      };

      const closeModal = () => {
        backdrop.classList.add("opacity-0");
        content.classList.add("opacity-0", "scale-95");
        setTimeout(() => {
          modal.classList.add("hidden");
          modalImg.src = "";
        }, 300);
      };

      document.querySelectorAll(".cert-item img").forEach((img) => {
        img.addEventListener("click", (e) => {
          const target = e.target as HTMLImageElement;
          openModal(target.src);
        });
      });

      closeBtn?.addEventListener("click", closeModal);
      backdrop.addEventListener("click", closeModal);
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && !modal.classList.contains("hidden"))
          closeModal();
      });
    }
  });
</script>

<style is:global>
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.8s ease-out forwards;
  }
  .animate-slide-up {
    animation: slide-up 0.8s ease-out forwards;
    opacity: 0;
  }

  .scroll-reveal {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }
  .scroll-reveal.active {
    opacity: 1;
    transform: translateY(0);
  }
</style>
