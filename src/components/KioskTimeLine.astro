---
// src/components/KioskTimeline.astro

const versions = [
  {
    id: 1,
    version: "ูุฏู ุชุฑุชุง (V1.0)", 
    year: "ฑดฐฐ",
    title: "ูพุฑูุชูุชุงูพ ุงููู: ุขุบุงุฒ ฺฉ ุฑูุง",
    description: "ุงููู ฺฏุงู ูุง ุจุง ูุงู ยซุชุฑุชุงยปุ ูุฎุณุชู ูพุฒุดฺฉ ุงุณุงุทุฑ ุงุฑุงูุ ุขุบุงุฒ ุดุฏ. ุงู ูุณุฎู ุตุฑูุงู ฺฉ ุงุจุฒุงุฑ ุณูุฌุด ูุจูุฏุ ุจูฺฉู ุงุซุจุงุช ฺฉ ุงุฏู ุฌุณูุฑุงูู ุจูุฏ. ุจุง ุจุฏููโุง ููุฒ ู ูุณุชุญฺฉูุ ุชูุฑฺฉุฒ ุชู ูู ุจุฑ ุฑู ุทุฑุงุญ ูุฏุงุฑูุง ูพุงู ู ุงูุฏุงุฒูโฺฏุฑ ุฏููโุชุฑู ุดุงุฎุตโูุง ูุฒฺฉ ุนู ูุฏุ ูุฒู ู ูุญุงุณุจู BMI ูุฑุงุฑ ุฏุงุดุช. ุชุฑุชุง ููุงุฏ ุชููุฏ ฺฉ ุชูฺฉุฑ ูู ุฏุฑ ูพุงุด ุณูุงูุช ุจูุฏ ฺฉู ูุดุงู ุฏุงุฏ ุชฺฉููููฺ ูโุชูุงูุฏ ุดุงููโุจูโุดุงูู ฺฉุงุฏุฑ ุฏุฑูุงู ุญุฑฺฉุช ฺฉูุฏ.",
    image: "/1.png",
    features: ["ุณูุฌุด ูุฏ ู ูุฒู", "ุจุฏูู ููุฒ ุตูุนุช", "ูุญุงุณุจูโฺฏุฑ BMI " , "ูพุงุด ููุงุฑ ููุจ"]
  },
  {
    id: 2,
    version: "ูุฏู ุฑุงุฒ (V2.0)", 
    year: "ฑดฐฑ",
    title: "ูุณุฎู ุชุฌุงุฑ: ุฏูุช ู ูุดุงูุฏู",
    description: "ุจุง ุงููุงู ุงุฒ ุฒฺฉุฑุง ุฑุงุฒุ ูพุฏุฑ ูุดุงูุฏุงุช ุจุงููุ ูุณุฎู ุฏูู ูุชููุฏ ุดุฏ. ุฏุฑ ุงู ูุฑุญููุ ูุง ุงุฒ ูุงุฒ ุขุฒูุงุดฺฏุงู ุฎุงุฑุฌ ุดุฏู ู ูุญุตูู ุชุฌุงุฑ ุจุง ุทุฑุงุญ ุงุฑฺฏููููฺฉ ุงุฑุงุฆู ุฏุงุฏู. ุฌูุด ุจุฒุฑฺฏ ูุง ุฏุฑ ูุฏู ุฑุงุฒุ ุงูุฒูุฏู ูุงฺููโูุง ุฏูู ูุดุงุฑ ุฎูู ู ูพุฑูุชุฑ ุญุฑุงุฑุช ุจูุฏ. ุญุงูุง ฺฉุงุฑุจุฑุงู ูโุชูุงูุณุชูุฏ ูู ุชููุง ุณูุงูุช ุฎูุฏ ุฑุง ุจุณูุฌูุฏุ ุจูฺฉู ูุชุฌู ุฑุง ููุงู ูุญุธู ุจู ุตูุฑุช ูฺฉุชูุจ ุฏุฑุงูุช ฺฉููุฏ. ุฑุงุฒุ ููุงุฏ ุฏูุชุ ุนูุช ู ูุฑูุฏ ูุฏุฑุชููุฏ ุฏูุฑุงูุฏ ุจู ุจุงุฒุงุฑ ุชุฌูุฒุงุช ูพุฒุดฺฉ ุจูุฏ.",
    image: "/4.png",
    features: ["ูุงฺูู ูุดุงุฑ ุฎูู ุฏุฌุชุงู", "ูพุฑูุชุฑ ุญุฑุงุฑุช ุขู", "ุจุฏูู ฺฉุงููพูุฒุช ุงุฑฺฏููููฺฉ"]
  },
{
    id: 3,
    version: "ูุฏู ุณูุฑุบ (V3.0)", 
    year: "ฑดฐฒ",
    title: "ูพุฑูุงุฒ ุฏุงุฏูโูุง ุจู ุงุจุฑูุง",
    description: "ู ุขูฺฏุงู ยซุณูุฑุบยป ูพุฑ ฺฏุดูุฏ. ุฏุฑ ุงู ูุณุฎู ุจุง ุชุบุฑ ุณุงุฎุชุงุฑ ุจู ุทุฑุงุญ ุฏูุงุฑ ู ูููุงูุ ูุถุง ฺฉูุชุฑ ุงุดุบุงู ุดุฏ ู ููุฒูุงู ุจุง ุงุชุตุงู ุจู ูุถุง ุงุจุฑ (Cloud)ุ ูุฑุฒูุง ูุฒฺฉ ุดฺฉุณุช. ฺฉุงุฑุจุฑุงู ูโุชูุงูุณุชูุฏ ุจุง ุดูุงุฑู ููุจุงู ูุงฺฏู ฺฉููุฏุ ูพุฑููุฏู ุณูุงูุช ุฏุฌุชุงู ุชุดฺฉู ุฏููุฏ ู ุชุงุฑุฎฺู ุชุบุฑุงุช ุจุฏู ุฎูุฏ ุฑุง ุฏุฑ ูพูู ุชุญุช ูุจ ูุดุงูุฏู ฺฉููุฏ. ุณูุฑุบุ ููุงุฏ ุฏุงูุด ูุณุน ุฏุฑ ฺฉุงูุจุฏ ุณุจฺฉ ู ูุฏุฑู ุงุณุช.",
    image: "/3.png",
    features: ["ุทุฑุงุญ ุฏูุงุฑ (Wall-mount)", "ูพุฑููุฏู ุณูุงูุช ุงุจุฑ", "ุงุญุฑุงุฒ ููุช ุจุง ููุจุงู"]
  },
  {
    id: 4,
    version: "ูุฏู ุณูุง (V4.0)", 
    year: "ฑดฐณ - ุงฺฉููู",
    title: "ุงูุฌ ููุดููุฏ ุจุง AI",
    description: "ุงูุฌ ุชฺฉุงูู ูููุฏุณ ูุง ุฏุฑ ูุฏู ยซุณูุงยป (ุงุจูโุณูุง) ุชฺฏู ูพุฏุง ฺฉุฑุฏ. ุงู ุฏุณุชฺฏุงู ููุท ุฏุงุฏู ุฌูุน ููโฺฉูุฏุ ุจูฺฉู ยซูฺฉุฑยป ูโฺฉูุฏ. ุจุง ุงูุฒูุฏู ุณูุณูุฑูุง ูพุดุฑูุชู ุงฺฉุณฺู ุฎูู (SpO2) ู ุชุจโุณูุฌุ ุจูุด ฺฉุงูู ุงุฒ ุจุฏู ุงุฑุงุฆู ูโุฏูุฏ. ุงูุง ุดุงูฺฉุงุฑ ุงุตูุ ุงุฏุบุงู ยซููุด ูุตููุนยป ุงุณุชุ ุงูฺฏูุฑุชูโูุง ูุง ุจุง ุชุญูู ุฑููุฏ ุฏุงุฏูโูุง ฺฉุงุฑุจุฑุ ุงูฺฏููุง ุฎุทุฑ ุฑุง ุดูุงุณุง ฺฉุฑุฏู ู ูพุดููุงุฏุงุช ุงุฎุชุตุงุต ุงุฑุงุฆู ูโุฏููุฏ. ููฺูู ุจุง ุณุณุชู ุชุดุฎุต ฺูุฑูุ ฺฉุงุฑุจุฑ ุจุฏูู ูุงุฒ ุจู ูุงุฑุฏ ฺฉุฑุฏู ุงุทูุงุนุงุชุ ุฏุฑ ฺฉุณุฑ ุงุฒ ุซุงูู ุดูุงุฎุชู ูโุดูุฏ.",
    image: "/2.png",
    features: ["ุชุญููฺฏุฑ ููุด ูุตููุน", "ุชุดุฎุต ฺูุฑู ", "ูพุงุด ฺฉุงูู ุนูุงุฆู ุญุงุช"]
  }
];
---

<section id="kiosk-evolution" class=" bg-gradient-to-b from-white via-white to-doramed-white/100 relative overflow-hidden">
    
    <div class="container mx-auto px-6 relative z-10 mt-9">
        
        <div class="text-center max-w-4xl mx-auto mb-24">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-doramed-primary/10 text-doramed-primary text-xs font-bold mb-4 border border-doramed-primary/20">
                ุชฺฉููููฺ ุจููุ ุงุณุชุงูุฏุงุฑุฏ ุฌูุงู
            </div>
            <h2 class="text-3xl md:text-5xl font-extrabold text-doramed-darker mb-6">
                ูุฑุงุซ ุณูุงูุช: ุงุฒ <span class="text-doramed-primary">ุชุฑุชุง</span> ุชุง <span class="text-doramed-primary">ุณูุง</span>
            </h2>
            
            <p class="text-doramed-muted text-lg leading-relaxed mb-6 text-justify md:text-center">
                ุจุง ฺฉูุณฺฉ ูพุงุด ุณูุงูุช ุฏูุฑุงูุฏุ ฺฉ ฺฉููฺฉ ููุดููุฏ ูุฌูุฒ ุจู <span class="text-doramed-primary font-bold">ููุด ูุตููุน</span> ุฑุง ุจู ูุถุง ุฎูุฏ ุจุงูุฑุฏ. ุงู ุงุณุชฺฏุงู ูพุดุฑูุชูุ ูุฑุงุชุฑ ุงุฒ ูพุงุด ูุญุธูโุง ุนูุงุฆู ุญุงุช (ูุดุงุฑ ุฎููุ ููุงุฑ ููุจุ ุงฺฉุณฺู ู ุฏูุง)ุ ุจุง ุงูฺฏูุฑุชูโูุง ุฏููุ ุฏุงุฏูโูุง ุดูุง ุฑุง ุชุญูู ฺฉุฑุฏู ู ุงูฺฏููุง ูพููุงู ุณูุงูุช ุฑุง ุดูุงุณุง ูโฺฉูุฏ. ุจุง ุงูฺฉุงู ุงูุฌุงู ุชุณุชโูุง ููุฏ ู ฺฉูุณุชุฑูู ู ุงุฑุณุงู ุขู ุฏุงุฏูโูุง ุฏุฑ ุจุณุชุฑ <span class="text-doramed-primary font-bold">ูพุฒุดฺฉ ุงุฒ ุฑุงู ุฏูุฑ</span>ุ ูุงุฒ ุจู ูุฑุงุฌุนุงุช ูฺฉุฑุฑ ุญุฐู ุดุฏู ู ูุฏุฑุช ุณูุงูุช ุดูุง ููุดููุฏุงููโุชุฑ ุงุฒ ููุดู ุฎูุงูุฏ ุจูุฏ.
            </p>

            <div class="relative inline-block">
                <p class="text-doramed-primary font-bold text-xl relative z-10">
                    ูุณุฑ ฺฉู ุท ฺฉุฑุฏู ุชุง ูพุดุฑูุชูโุชุฑู ุงุณุชฺฏุงู ุณูุงูุช ฺฉุดูุฑ ุฑุง ุจุณุงุฒู.
                </p>
            </div>
        </div>

        <div class="relative wrap overflow-hidden p-0 md:p-10 h-full">
            
            <div class="border-2-2 absolute border-opacity-20 border-doramed-primary h-full border left-8 md:left-1/2 top-0 transform -translate-x-1/2" style="border-width: 2px;"></div>

            {versions.map((item, index) => (
                <div class={`mb-24 flex justify-between items-stretch w-full timeline-item opacity-0 translate-y-20 transition-all duration-1000 ease-out ${index % 2 === 0 ? 'md:flex-row-reverse left-timeline' : 'md:flex-row right-timeline'}`}>
                    
    <div class="order-1 w-full md:w-5/12 px-6 py-4 hidden md:flex flex-col">                    
         <div class="hidden md:flex flex-col h-full min-h-[550px] text-right bg-white p-8 rounded-3xl shadow-sm border border-doramed-white hover:shadow-lg hover:border-doramed-primary/30 transition-all duration-300">
                            
                            <span class="mb-3 font-bold text-doramed-primary text-sm block tracking-widest uppercase">{item.year}</span>
                            <h3 class="mb-4 font-extrabold text-doramed-darker text-3xl">{item.title}</h3>
                            <h4 class="mb-6 text-lg text-doramed-primary font-bold border-b border-doramed-white pb-2 inline-block w-max">{item.version}</h4>
                            
                            <p class="text-base leading-8 text-doramed-muted mb-8 text-justify flex-grow">
                                {item.description}
                            </p>
                            
                            <div class="flex flex-wrap gap-2 mt-auto">
                                {item.features.map(f => (
                                    <span class="text-xs font-bold bg-doramed-white text-doramed-darker px-3 py-1.5 rounded-lg border border-doramed-gray/20">
                                        {f}
                                    </span>
                                ))}
                            </div>
                        </div>
                    </div>
                    
                    <div class="z-20 flex items-center order-1 bg-doramed-primary shadow-xl w-14 h-14 rounded-full border-4 border-white absolute left-8 md:left-1/2 transform -translate-x-1/2 mt-10 md:mt-0">
                        <h1 class="mx-auto font-bold text-sm text-white">{index + 1}</h1>
                    </div>
                    
                        <div class="order-1 w-full md:w-5/12 pl-10 pr-0 md:px-6 md:ml-0 flex flex-col items-end">                        <div class="w-full items-end bg-white p-6 md:p-5 rounded-3xl md:rounded-[2.5rem] shadow-xl border border-doramed-white hover:border-doramed-primary/50 transition group relative overflow-hidden h-full min-h-[400px] md:min-h-[550px] flex flex-col justify-center">                            
                            <div class="absolute top-0 right-0 w-40 h-40 bg-doramed-primary/5 rounded-full blur-3xl opacity-50 -mr-10 -mt-10 group-hover:bg-doramed-primary/10 transition"></div>
                            
                            <div class="relative w-full flex-grow flex items-center justify-center p-6">
                                 <img src={item.image} alt={item.title} class="w-full max-h-[400px] object-contain transform group-hover:scale-105 transition duration-700 drop-shadow-lg" />
                            </div>

                            <div class="block md:hidden mt-6 px-2 pb-4">
                                <span class="text-doramed-primary text-xs font-bold block mb-1">{item.year}</span>
                                <h3 class="text-xl font-bold text-doramed-darker mb-1">{item.title}</h3>
                                <h4 class="text-md font-bold text-doramed-primary mb-3">{item.version}</h4>
                                <p class="text-sm text-doramed-muted mb-4 leading-7 text-justify">{item.description}</p>
                                <div class="flex flex-wrap gap-2">
                                    {item.features.map(f => (
                                        <span class="text-[10px] bg-doramed-primary px-2 py-1 rounded border border-gray-200">{f}</span>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            ))}

            <div class="mb-16 flex flex-col items-center w-full timeline-item opacity-0 translate-y-20 transition-all duration-1000 ease-out pl-10 md:pl-0">
                
                <div class="z-20 flex items-center justify-center bg-doramed-darker shadow-xl w-12 h-12 md:w-16 md:h-16 rounded-full border-4 border-white animate-bounce mb-6 relative right-[154px] md:right-auto md:left-0 top-20 md:top-auto">                    <h1 class="font-bold text-xl md:text-2xl text-white">?</h1>
                </div>
                
                <div class="bg-gradient-to-br from-doramed-darker to-doramed-dark rounded-2xl md:rounded-[2.5rem] shadow-2xl w-full md:w-3/4 px-5 py-8 md:px-8 md:py-12 border-2 border-doramed-muted relative overflow-hidden group text-center mt-6 md:mt-0">
                    
                    <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-10 mix-blend-overlay hidden md:block"></div>
                    
                    <span class="mb-2 md:mb-3 font-bold text-doramed-primary text-xs md:text-sm block tracking-widest uppercase">V5.0 - ุขูุฏู ูุฒุฏฺฉ</span>
                    <h3 class="mb-3 md:mb-4 font-black text-white text-xl md:text-3xl leading-tight">ูฺฺฏ ุจุนุฏ ุจุง ุดูุง!</h3>
                    
                    <p class="text-doramed-gray text-sm md:text-lg leading-relaxed mb-6 md:mb-8 max-w-xl mx-auto">
                        ูุง ุฏุฑ ุญุงู ุชูุณุนู ูุณู ูพูุฌู ฺฉูุณฺฉ ูุณุชู. ุจู ูุธุฑ ุดูุง ุฌุง ฺู ูุงุจูุช ุฏุฑ ุงู ุฏุณุชฺฏุงู ุฎุงู ุงุณุชุ
                    </p>

                    <div class="flex justify-center">
                        <button id="open-suggestion-modal" class="relative w-full md:w-auto px-6 py-3.5 md:px-8 md:py-4 bg-white text-doramed-darker font-extrabold rounded-xl shadow-lg hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2 text-sm md:text-base">
                            <span class="relative z-10">ุซุจุช ูพุดููุงุฏ</span>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-4 h-4 md:w-5 md:h-5 relative z-10">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            </div>
            
        </div>
    </div>
</section>

<div id="suggestion-modal" class="fixed inset-0 z-[9999] hidden flex items-center justify-center px-4">
    <div class="absolute inset-0 bg-doramed-darker/80 backdrop-blur-sm transition-opacity opacity-0" id="modal-backdrop"></div>
    
    <div class="relative bg-white rounded-3xl w-full max-w-md p-6 md:p-8 shadow-2xl transform scale-90 opacity-0 transition-all duration-300 border border-doramed-white" id="modal-content">
        <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors p-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
        <div class="text-center mb-6">
            <div class="w-16 h-16 bg-doramed-primary/10 rounded-full flex items-center justify-center mx-auto mb-4 text-doramed-primary animate-pulse">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.001 6.001 0 00-5.951 5.808 6 6 0 00-3.001 3.003h17.904a6 6 0 00-3.001-3.003A6.001 6.001 0 0012 12.75zm0 0a6 6 0 016-6v-3.75h-3a6 6 0 01-6 6v3.75h-3a6 6 0 016-6zM12 12.75a6 6 0 006-6v-3.75h-3a6 6 0 00-6 6v3.75h-3a6 6 0 006-6z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" /></svg>
            </div>
            <h3 class="text-2xl font-extrabold text-doramed-darker">ุงุฏู ุดูุงุ ุขูุฏู ูุง</h3>
            <p class="text-sm text-doramed-muted mt-2">ฺู ูฺฺฏ ุฌุฏุฏ ุฏุฑ ฺฉูุณฺฉ ุณูุงูุช ูุงุฒ ุฏุงุฑุฏุ</p>
        </div>
        <form class="space-y-4" onsubmit="event.preventDefault(); alert('ููููู! ูพุดููุงุฏ ุดูุง ุซุจุช ุดุฏ.'); document.getElementById('close-modal').click();">
            <div><label class="block text-sm font-bold text-doramed-dark mb-1">ูุงู ุดูุง (ุงุฎุชุงุฑ)</label><input type="text" class="w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-doramed-primary focus:ring-0 outline-none transition bg-gray-50 focus:bg-white" placeholder="ูุซูุง: ุนู ุงุญูุฏ" /></div>
            <div><label class="block text-sm font-bold text-doramed-dark mb-1">ูพุดููุงุฏ ุดูุง *</label><textarea rows="4" class="w-full px-4 py-3 rounded-xl border-2 border-gray-100 focus:border-doramed-primary focus:ring-0 outline-none transition bg-gray-50 focus:bg-white resize-none" placeholder="ูู ูฺฉุฑ ูโฺฉูู ุงฺฏุฑ ุฏุณุชฺฏุงู ูุงุจูุช..."></textarea></div>
            <button type="submit" class="w-full py-4 bg-doramed-primary text-white font-bold rounded-xl hover:bg-doramed-darker transition shadow-lg hover:shadow-xl transform active:scale-95">ุงุฑุณุงู ุงุฏู ๐</button>
        </form>
    </div>
</div>

<script>
    const observerOptions = { root: null, threshold: 0.1 };
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.remove('opacity-0', 'translate-y-20');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);
    document.querySelectorAll('.timeline-item').forEach(item => observer.observe(item));

    const modal = document.getElementById('suggestion-modal');
    const modalContent = document.getElementById('modal-content');
    const backdrop = document.getElementById('modal-backdrop');
    const openBtn = document.getElementById('open-suggestion-modal');
    const closeBtn = document.getElementById('close-modal');

    function openModal() {
        modal.classList.remove('hidden');
        setTimeout(() => {
            backdrop.classList.remove('opacity-0');
            modalContent.classList.remove('scale-90', 'opacity-0');
            modalContent.classList.add('scale-100', 'opacity-100');
        }, 10);
    }
    function closeModal() {
        backdrop.classList.add('opacity-0');
        modalContent.classList.remove('scale-100', 'opacity-100');
        modalContent.classList.add('scale-90', 'opacity-0');
        setTimeout(() => { modal.classList.add('hidden'); }, 300);
    }
    if (openBtn) openBtn.addEventListener('click', openModal);
    if (closeBtn) closeBtn.addEventListener('click', closeModal);
    if (backdrop) backdrop.addEventListener('click', closeModal);
</script>