---
// src/components/KioskTimeline.astro

// دیتای ورژن‌های مختلف کیوسک
const versions = [
  {
    id: 1,
    version: "V1.0",
    year: "۱۴۰۰",
    title: "پروتوتایپ اولیه",
    description: "اولین نمونه آزمایشگاهی با بدنه فلزی ساده. تمرکز روی سنجش قد و وزن و محاسبه BMI پایه بود. این نسخه فقط برای تست‌های داخلی استفاده شد.",
    image: "../../public/1.svg", // عکس موقت
    features: ["سنجش قد و وزن", "بدنه فلزی سنگین", "نمایشگر کاراکتری"]
  },
  {
    id: 2,
    version: "V2.0",
    year: "۱۴۰۱",
    title: "نسخه تجاری (MVP)",
    description: "طراحی ارگونومیک‌تر شد و سنسور فشار خون به آن اضافه گردید. در این نسخه برای اولین بار اتصال به پرینتر حرارتی برای چاپ آنی نتایج ممکن شد.",
    image: "../../public/4.svg", // عکس موقت
    features: ["افزودن فشارسنج", "پرینتر حرارتی", "بدنه فایبرگلاس"]
  },
  {
    id: 3,
    version: "V3.0",
    year: "۱۴۰۲",
    title: "هوشمندسازی و اتصال به سرور",
    description: "انقلاب نرم‌افزاری دورامد! اتصال دستگاه به اینترنت و ارسال داده‌ها به سرور ابری. کاربر می‌توانست با شماره موبایل لاگین کند و تاریخچه سلامت خود را ببیند.",
    image: "../../public/3.svg", // عکس موقت
    features: ["اتصال به Wi-Fi", "پنل کاربری تحت وب", "شناسایی با شماره موبایل"]
  },
  {
    id: 4,
    version: "V4.0",
    year: "۱۴۰۳ - اکنون",
    title: "نسخه نهایی (The Ultimate)",
    description: "کامل‌ترین ایستگاه سلامت ایران. مجهز به هوش مصنوعی برای تحلیل داده‌ها، تشخیص چهره برای ورود، و طراحی مدرن و مینیمال که مناسب لوکس‌ترین کلینیک‌هاست.",
    image: "../../public/2.svg", // عکس موقت
    features: ["تشخیص چهره (Face ID)", "تحلیل هوش مصنوعی", "سنجش SpO2 و تب‌سنج"]
  }
];
---

<section id="kiosk-evolution" class="py-24 bg-gradient-to-b from-white to-blue-50 relative overflow-hidden">
    
    <div class="container mx-auto px-6 relative z-10">
        
        <div class="text-center max-w-4xl mx-auto mb-20">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-xs font-bold mb-4 border border-blue-200">
                محصول پرچمدار دورامد
            </div>
            <h2 class="text-3xl md:text-5xl font-extrabold text-gray-900 mb-6">
                داستان تکامل <span class="text-blue-600">کیوسک پایش سلامت</span>
            </h2>
            
            <p class="text-gray-600 text-lg leading-relaxed mb-4">
                با کیوسک پایش سلامت دورامد، کلینیک شخصی خود را همیشه در دسترس داشته باشید. این ایستگاه هوشمند به شما امکان می‌دهد علائم حیاتی کلیدی نظیر فشار خون، نوار قلب، اکسیژن خون و دمای بدن را به‌صورت لحظه‌ای و دقیق پایش کنید. فراتر از این، با قابلیت انجام تست‌های قند و کلسترول، نیاز به مراجعات مکرر پزشکی برای چکاپ‌های روتین را به حداقل می‌رسانید و مدیریت سلامتی خود را هوشمندانه‌تر انجام می‌دهید.
            </p>

            <p class="text-blue-600 font-bold text-lg">
                مسیری که طی کردیم تا پیشرفته‌ترین ایستگاه سلامت کشور را بسازیم.
            </p>
        </div>

        <div class="relative wrap overflow-hidden p-0 md:p-10 h-full">
            
            <div class="border-2-2 absolute border-opacity-20 border-blue-600 h-full border left-8 md:left-1/2 top-0 transform -translate-x-1/2" style="border-width: 2px;"></div>

            {versions.map((item, index) => (
                <div class={`mb-16 flex justify-between items-center w-full timeline-item opacity-0 translate-y-20 transition-all duration-1000 ease-out ${index % 2 === 0 ? 'md:flex-row-reverse left-timeline' : 'md:flex-row right-timeline'}`}>
                    
                    <div class="order-1 w-0 md:w-5/12"></div>
                    
                    <div class="z-20 flex items-center order-1 bg-blue-600 shadow-xl w-12 h-12 rounded-full border-4 border-white absolute left-8 md:left-1/2 transform -translate-x-1/2">
                        <h1 class="mx-auto font-semibold text-sm text-white">{item.version}</h1>
                    </div>
                    
                    <div class="order-1 bg-white rounded-3xl shadow-xl w-full md:w-5/12 px-6 py-6 ml-12 md:ml-0 border border-gray-100 hover:border-blue-400 transition group relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-blue-50 rounded-full blur-3xl opacity-50 -mr-16 -mt-16 group-hover:bg-blue-100 transition"></div>

                        <span class="mb-3 font-bold text-blue-600 text-sm block">{item.year}</span>
                        <h3 class="mb-3 font-bold text-gray-800 text-xl">{item.title}</h3>
                        
                        <div class="mb-4 overflow-hidden rounded-xl w-full aspect-square bg-gray-100 relative">
                             <img src={item.image} alt={item.title} class="w-full h-full object-contain transform group-hover:scale-105 transition duration-700" />
                        </div>

                        <p class="text-sm leading-snug tracking-wide text-gray-600 text-opacity-100 mb-4">
                            {item.description}
                        </p>

                        <div class="flex flex-wrap gap-2">
                            {item.features.map(f => (
                                <span class="text-[10px] bg-gray-100 text-gray-500 px-2 py-1 rounded-md group-hover:bg-blue-50 group-hover:text-blue-600 transition">
                                    {f}
                                </span>
                            ))}
                        </div>
                    </div>
                </div>
            ))}
            
        </div>
    </div>
</section>

<script>
    const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.remove('opacity-0', 'translate-y-20');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    document.querySelectorAll('.timeline-item').forEach(item => {
        observer.observe(item);
    });
</script>
